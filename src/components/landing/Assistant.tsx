import React, { useEffect, useRef, useState } from "react";import { Card } from "@/components/ui/card";import { Button } from "@/components/ui/button";import { Input } from "@/components/ui/input";import { MessageCircle, X, Send, Bot } from "lucide-react";import { cn } from "@/lib/utils";type ChatMessage = { role: "bot" | "user"; content: string };const cannedReply = (text: string): string => { const t = text.toLowerCase(); if (t.includes("price") || t.includes("pricing")) return "Bloom offers flexible plans based on usage, features, and support. Reach out via the Contact section for a tailored quote."; if (t.includes("feature") || t.includes("capabilities")) return "Key features include gamified modules, real-time feedback, collaborative tools, and data-rich insights to track growth."; if (t.includes("start") || t.includes("get started")) return "Click the Get Started CTA or send us a message via the Contact section. We\u2019ll help tailor Bloom to your goals."; if (t.includes("contact")) return "Use the Contact section below to send us a message. We\u2019ll follow up promptly."; if (t.includes("privacy") || t.includes("security")) return "Bloom follows privacy-first design with secure data handling and role-based access."; if (t.includes("mobile")) return "Bloom is responsive and optimized for mobile across devices."; return "This is the Nuvana360 Bloom landing page. Bloom is an interactive, data-driven learning platform that makes engagement measurable and fun.";};export const Assistant = () => { const [open, setOpen] = useState(false); const [messages, setMessages] = useState<ChatMessage[]>([{ role: "bot", content: "Hi! I\u2019m your Bloom Assistant. This page introduces Nuvana360 Bloom\u2014an interactive, data-driven learning platform. Ask me anything!" }]); const [input, setInput] = useState(""); const containerRef = useRef<HTMLDivElement | null>(null); useEffect(() => { if (containerRef.current) { containerRef.current.scrollTop = containerRef.current.scrollHeight; } }, [messages, open]); const send = (text: string) => { if (!text.trim()) return; const userMsg: ChatMessage = { role: "user", content: text.trim() }; setMessages((prev) => [...prev, userMsg]); setInput(""); setTimeout(() => { const reply = cannedReply(text); setMessages((prev) => [...prev, { role: "bot", content: reply }]); }, 450); }; const handleSubmit = (e: React.FormEvent) => { e.preventDefault(); send(input); }; const QuickButton = ({ label, value }: { label: string; value: string }) => ( <Button type="button" className="h-8 px-3 bg-secondary text-secondary-foreground hover:bg-secondary/80 transition-colors" onClick={() => send(value)}> {label} </Button> ); return ( <> <div className="fixed bottom-4 right-4 z-50"> {open && ( <Card className="mb-3 w-[360px] max-w-[92vw] glass-strong gradient-border shadow-xl animate-fade-up"> <div className="flex items-center justify-between p-3"> <div className="flex items-center gap-2"> <Bot className="h-5 w-5 text-primary" /> <span className="font-semibold text-foreground">Bloom Assistant</span> </div> <Button className="text-foreground hover:text-primary" variant="ghost" onClick={() => setOpen(false)}> <X className="h-4 w-4" /> </Button> </div> <div className="px-3 pb-3"> <div ref={containerRef} className="h-[260px] overflow-y-auto rounded-md border border-border bg-sidebar/40 p-3"> {messages.map((m, i) => ( <div key={i} className={cn("mb-3 flex", m.role === "user" ? "justify-end" : "justify-start")}> <div className={cn("max-w-[85%] rounded-lg px-3 py-2 text-sm", m.role === "user" ? "bg-primary text-primary-foreground glow-green" : "bg-background/60 text-foreground border border-border")}> {m.content} </div> </div> ))} </div> <div className="mt-3 flex flex-wrap gap-2"> <QuickButton label="What is Bloom?" value="What is Nuvana360 Bloom?" /> <QuickButton label="Features" value="Tell me about features" /> <QuickButton label="Get Started" value="How do I get started?" /> <QuickButton label="Pricing" value="What are the pricing options?" /> </div> <form onSubmit={handleSubmit} className="mt-3 flex items-center gap-2"> <Input value={input} onChange={(e) => setInput(e.target.value)} placeholder="Ask about Bloom..." className="bg-background text-foreground placeholder:text-muted-foreground focus-visible:ring-primary" /> <Button type="submit" className="bg-primary text-primary-foreground glow-green hover:opacity-90"> <Send className="h-4 w-4" /> </Button> </form> </div> </Card> )} <Button onClick={() => setOpen((v) => !v)} className="rounded-full bg-primary text-primary-foreground shadow-lg glow-green hover:scale-105 transition-transform"> <MessageCircle className="h-5 w-5 mr-2" /> {open ? "Close Assistant" : "Ask Bloom"} </Button> </div> </> );};export default Assistant;